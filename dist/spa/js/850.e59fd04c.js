"use strict";(globalThis["webpackChunkacademic_calendar"]=globalThis["webpackChunkacademic_calendar"]||[]).push([[850],{8850:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});a(3610);var r=a(3673),l=a(2323);const i={class:"flex flex-center column q-pa-xs",style:{border:"2pt solid grey"}},n={style:{"font-size":"1.1em"}},s={class:"flex row"},o={class:"flex column flex-center q-pa-sm q-ma-xs",style:{border:"2pt solid grey","font-size":"1.2em"}},d={class:"flex column flex-center q-pa-sm q-ma-xs",style:{border:"2pt solid grey","font-size":"1.2em"}},u={class:"flex column flex-center q-pa-sm q-ma-xs",style:{border:"2pt solid grey","font-size":"1.2em"}},c={key:0,class:"text-negative"},h={class:"flex row",style:{}},f={class:"row items-center justify-end"},y={class:"flex-center flex q-ma-xs"},p=(0,r.Uk)(" PL"),g=(0,r.Uk)("EN"),m={class:"q-gutter-xs row bg-cyan-1 rounded-borders q-pa-xs q-mx-sm",style:{"max-width":"1024px","min-height":"73px",border:"2pt solid #33a"}},w={key:0,class:"flex row"},b={style:{"margin-bottom":"40pt"},class:"q-ma-md"},k=(0,r._)("td",{style:{border:"2px solid black",width:"40pt"}},null,-1),D={style:{border:"2px solid black",width:"100pt"}},x={style:{border:"2px solid black",width:"100pt"}},v={style:{border:"2px solid black",width:"100pt"}},_={style:{border:"2px solid black",width:"100pt"}},z={style:{border:"2px solid black",width:"100pt"}},q={style:{border:"2px solid black","text-align":"right"}},C=["onClick"],S=["innerHTML"];function W(e,t,a,W,I,M){const L=(0,r.up)("q-toolbar-title"),E=(0,r.up)("q-toolbar"),P=(0,r.up)("q-header"),V=(0,r.up)("q-btn"),T=(0,r.up)("q-date"),H=(0,r.up)("q-popup-proxy"),Z=(0,r.up)("q-icon"),Q=(0,r.up)("q-input"),F=(0,r.up)("q-toggle"),$=(0,r.up)("q-badge"),j=(0,r.up)("q-chip"),U=(0,r.up)("q-page"),O=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(P,{elevated:""},{default:(0,r.w5)((()=>[(0,r.Wm)(E,null,{default:(0,r.w5)((()=>[(0,r.Wm)(L,{class:"text-center"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.title),1)])),_:1})])),_:1})])),_:1}),(0,r.Wm)(U,{class:"flex items-center column q-mt-md"},{default:(0,r.w5)((()=>[(0,r._)("div",i,[(0,r._)("div",n,[(0,r._)("b",null,(0,l.zw)(e.metricsLbl),1)]),(0,r._)("div",s,[(0,r._)("div",o,[(0,r._)("div",null,(0,l.zw)(e.parityErrorLbl),1),(0,r._)("div",null,[(0,r._)("b",null,(0,l.zw)(e.parityError),1)])]),(0,r._)("div",d,[(0,r._)("div",null,(0,l.zw)(e.weekdayErrorLbl),1),(0,r._)("div",null,[(0,r._)("b",null,(0,l.zw)(e.weekdayError),1)])]),(0,r._)("div",u,[(0,r._)("div",null,(0,l.zw)(e.partErrorLbl),1),(0,r._)("div",null,[(0,r._)("b",null,(0,l.zw)(e.partError),1)])])])]),(0,r._)("div",{class:"q-pa-sm q-ma-sm flex column",style:(0,l.j5)([{border:"2pt solid"},{"border-color":e.isValid?"grey":"red"}])},[(0,r._)("div",null,[(0,r.Uk)((0,l.zw)(e.parametersLbl)+" ",1),e.isValid?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("span",c,[(0,r._)("b",null,"("+(0,l.zw)(e.isInvalidLbl)+")",1)]))]),(0,r._)("div",h,[(0,r.Wm)(Q,{class:"q-ma-xs",outlined:"",rounded:"",modelValue:e.startDate,"onUpdate:modelValue":t[1]||(t[1]=t=>e.startDate=t),readonly:"",label:e.semStartDateLbl},{append:(0,r.w5)((()=>[(0,r.Wm)(Z,{name:"event",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r.Wm)(H,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(T,{modelValue:e.startDate,"onUpdate:modelValue":t[0]||(t[0]=t=>e.startDate=t),mask:"YYYY-MM-DD",minimal:"",options:e=>[1].includes(new Date(e).getDay()),"first-day-of-week":"1"},{default:(0,r.w5)((()=>[(0,r._)("div",f,[(0,r.wy)((0,r.Wm)(V,{label:"Close",color:"primary",flat:""},null,512),[[O]])])])),_:1},8,["modelValue","options"])])),_:1})])),_:1})])),_:1},8,["modelValue","label"]),(0,r.Wm)(Q,{class:"q-ma-xs",type:"number",outlined:"",rounded:"",modelValue:e.t,"onUpdate:modelValue":t[2]||(t[2]=t=>e.t=t),modelModifiers:{number:!0},label:e.numOfWeeks},null,8,["modelValue","label"]),(0,r.Wm)(Q,{class:"q-ma-xs",type:"number",outlined:"",rounded:"",modelValue:e.t1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.t1=t),modelModifiers:{number:!0},label:e.numOfWeeksInFirstPart},null,8,["modelValue","label"]),(0,r._)("div",y,[p,(0,r.Wm)(F,{modelValue:e.english,"onUpdate:modelValue":t[4]||(t[4]=t=>e.english=t),color:e.english?"red":"blue",class:(0,l.C_)({"toggle-red":e.english,"toggle-blue":!e.english}),"keep-color":""},null,8,["modelValue","color","class"]),g])])],4),(0,r._)("div",m,[(0,r.Wm)($,{color:"red"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,l.zw)(e.holidaysBadgeLbl)+":",1)])),_:1}),(0,r._)("div",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.holidaysInCalendar,((t,a)=>((0,r.wg)(),(0,r.j4)(j,{key:t,removable:"",color:"primary","text-color":"white",icon:"free_cancellation",label:e.holidaysInCalendar[a],title:e.holidaysInCalendar[a],onRemove:t=>e.removeHoliday(e.holidaysInCalendar[a])},null,8,["label","title","onRemove"])))),128))])]),e.isValid?((0,r.wg)(),(0,r.iD)("div",w,[(0,r._)("table",b,[(0,r._)("tr",null,[k,(0,r._)("td",D,(0,l.zw)(e.weekdays[0]),1),(0,r._)("td",x,(0,l.zw)(e.weekdays[1]),1),(0,r._)("td",v,(0,l.zw)(e.weekdays[2]),1),(0,r._)("td",_,(0,l.zw)(e.weekdays[3]),1),(0,r._)("td",z,(0,l.zw)(e.weekdays[4]),1)]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.betterCalendarMatrix,((t,a)=>((0,r.wg)(),(0,r.iD)("tr",{key:t},[(0,r._)("td",q,(0,l.zw)(e.english?"w":"t")+(0,l.zw)(a+1)+"/x"+(0,l.zw)(a%2+1),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t,((t,i)=>((0,r.wg)(),(0,r.iD)("td",{onClick:r=>e.addHoliday(t,a,i),key:t,style:(0,l.j5)([{"text-align":"right"},{"background-color":e.getBckColor(t,a,i)}]),class:"cursor-pointer"},[1!=t["free"]?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,l.C_)({"text-bold":1==t["part"]})},[(0,r._)("span",{innerHTML:e.getLabel(t,a,i)},null,8,S)],2)):(0,r.kq)("",!0)],12,C)))),128))])))),128))])])):(0,r.kq)("",!0)])),_:1})],64)}a(71);const I=(0,r.aZ)({name:"PageIndex",data(){return{startDate:"2021-03-01",holidays:["2021-01-01","2021-01-06","2021-04-04","2021-04-05","2021-05-01","2021-05-03","2021-05-23","2021-06-03","2021-08-15","2021-11-01","2021-11-11","2021-12-25","2021-12-26","2022-01-01","2022-01-06","2022-04-17","2022-04-18","2022-05-01","2022-05-03","2022-06-05","2022-06-16","2022-08-15","2022-11-01","2022-11-11","2022-12-25","2022-12-26","2023-01-01","2023-01-06","2023-04-09","2023-04-10","2023-05-01","2023-05-03","2023-05-28","2023-06-08","2023-08-15","2023-11-01","2023-11-11","2023-12-25","2023-12-26"],t:15,t1:8,english:!0}},methods:{d:function(e){return Math.min(5,5*(this.t-e)+this.f)},getBckColor:function(e,t,a){return e["free"]?"white":e["parity"]?"#edfaff":"#fff4f4"},getLabel:function(e,t,a){let r=e=>`${String(e["date"].getDate()).padStart(2,"0")}.${String(e["date"].getMonth()+1).padStart(2,"0")}`,l=r(e);if(e["free"])return"";if(e["weekday"]!=a){let t=r(e["old"]),a=e["weekday"];return`<b style="color: red;">(${this.weekdays[a]})</b>(${l}) ${t}`}if(e["week"]!=t){let t=r(e["old"]);return`(${l}) ${t}`}return`${l}`},dateToCell:function(e,t,a){var r=(new Date(t).getTime()-new Date(e).getTime())/864e5;let l=Math.floor(r/7),i=r%7;if(!(void 0==a||l>=a.length||void 0==a[l]||i>=a[l].length||i>4))return a[l][i]},dateToString:function(e){return`${e.getYear()+1900}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`},addHoliday:function(e,t,a){let r=`${this.dateToString(e["old"]?e["old"]["date"]:e["date"])}`;this.holidays.includes(r)?this.removeHoliday(r):this.holidays=this.holidays.concat([r])},removeHoliday:function(e){this.holidays=this.holidays.filter((t=>t!=e))},countDays:function(e,t){let a=0;for(let r of this.betterCalendarMatrix)for(let l of r)l[e]==t&&1!=l["free"]&&(a+=1);return a},getError:function(e){let t=0;for(let a=0;a<this.betterCalendarMatrix.length;a++){let r=this.betterCalendarMatrix[a];for(let l=0;l<r.length;l++){let r=this.betterCalendarMatrix[a][l],i=this.calendarMatrix[a][l];r[e]!=i[e]&&(t+=1)}}return t},getHolidaysInCalendar:function(){let e,t=0,a=0;do{e=new Date(this.startDate),e.setDate(e.getDate()+7*this.t+t+2*Math.floor(t/2)),a=t,t=this.holidays.filter((t=>new Date(t)>=new Date(this.startDate)&&new Date(t)<=e&&[1,2,3,4,5].includes(new Date(t).getDay()))).length}while(t!=a);return this.holidays.filter((t=>new Date(t)>=new Date(this.startDate)&&new Date(t)<=e&&[1,2,3,4,5].includes(new Date(t).getDay()))).sort()}},computed:{isValid:function(){return!(this.t<2||this.t1<1||this.t1>this.t||this.totalWeeksForEachWeekday.map(((e,t)=>e-this.part1totalWeeksForEachWeekday[t])).filter((e=>e<0)).length>0)},totalWeeksForEachWeekday:function(){let e=[];for(let t=0;t<5;t++)e[t]=this.w-1+(this.d(this.w-1)>t?1:0);return e},part1totalWeeksForEachWeekday:function(e,t){let a=[0,0,0,0,0];for(let r=0;r<5;r++)for(let e of this.betterCalendarMatrix)e.length>r&&(1==e[r]["part"]||e[r]["free"])&&(a[r]+=1);return a},parityError:function(){return this.getError("parity")},weekdayError:function(){return this.getError("weekday")},partError:function(){return this.getError("part")},weekdays:function(){return this.english?["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]:["Pn","Wt","Śr","Cz","Pt","So","Nd"]},semStartDateLbl:function(){return this.english?"Semester start date":"Data rozpoczęcia semestru"},numOfWeeks:function(){return this.english?"Number of weeks":"Liczba tygodni"},numOfWeeksInFirstPart:function(){return this.english?"Number of weeks in first part":"Liczba tyg. w pierwszej części sem."},holidaysBadgeLbl:function(){return this.english?"Holidays (click on calendar day to add)":"Dni wolne (kliknij dzień aby dodać)"},title:function(){return this.english?"Academic calendar scheduler":"Generator kalendarza semestralnego"},parametersLbl:function(){return this.english?"Parameters":"Parametry"},isInvalidLbl:function(){return this.english?"Parameters are invalid. Please make sure the number of weeks, number of weeks in first part and number of holidays are valid.":"Parametry są niepoprawne. Upewnij się, że liczba tygodni w obu częściach semestru oraz liczba dni wolnych są poprawne."},metricsLbl:function(){return this.english?"Metrics":"Metryki"},parityErrorLbl:function(){return this.english?"Parity error":"Błąd parzystości tyg."},weekdayErrorLbl:function(){return this.english?"Weekday error":"Błąd dnia tyg."},partErrorLbl:function(){return this.english?"Part error":"Błąd połowy sem."},F:function(){return this.holidays.map((e=>this.dateToCell(this.startDate,e,this.calendarMatrix))).filter((e=>void 0!=e))},holidaysInCalendar:function(){return this.getHolidaysInCalendar()},f:function(){return this.holidaysInCalendar.length},w:function(){return this.t+Math.ceil(this.f/5)},endDate:function(){let e=new Date(this.startDate);return e.setDate(e.getDate()+7*this.t),e},betterCalendarT1:function(){return this.countDays("part",1)},betterCalendarT2:function(){return this.countDays("part",2)},betterCalendarParity1:function(){return this.countDays("parity",0)},betterCalendarParity2:function(){return this.countDays("parity",1)},calendarMatrix:function(){let e=[],t=new Date(this.startDate);for(let a=0;a<this.w;a++){let r=[];for(let e=0;e<this.d(a);e++){let l={date:new Date(t),week:a,weekday:e,part:a<this.t1?1:2,parity:(a+1)%2,free:!1};r.push(l),t.setDate(t.getDate()+1)}e.push(r),t.setDate(t.getDate()+2)}return e},betterCalendarMatrix:function(){let e=[],t=this.calendarMatrix.map((t=>t.map((t=>(this.F.includes(t)&&(e.push({...t}),Object.assign(t,{free:!0})),{...t}))))),a=e=>{for(let a=0;a<this.A.length;a++){let r=this.A[a],l=t[r.week][r.weekday];if(void 0==l["assigned"])for(let a=0;a<this.F.length;a++){let r=this.F[a],i=t[r.week][r.weekday];if(void 0==i["assigned"]&&e(l,i)){let e={...l};Object.assign(l,{old:e,parity:i["parity"],weekday:i["weekday"],week:i["week"],date:i["date"],assigned:!0}),Object.assign(i,{assigned:!0});break}}}};a(((e,t)=>t["parity"]==e["parity"]&&t["weekday"]==e["weekday"])),a(((e,t)=>t["weekday"]==e["weekday"])),a(((e,t)=>t["parity"]==e["parity"])),a(((e,t)=>!0));let r=this.F.filter((e=>1==e["part"]));for(let l of r){let e=t.flat().filter((e=>e["weekday"]==l["weekday"]&&e["parity"]==l["parity"]&&2==e["part"]&&!e["free"]));if(e.length<=0)return[];e[0]["part"]=1}return t},A:function(){let e=[];for(let t=this.t;t<this.w;t++)for(let a=0;a<this.d(t);a++)e.push(this.calendarMatrix[t][a]);return e}},created(){var e;let t=null!==(e=localStorage.getItem("english"))&&void 0!==e?e:"true";this.english="true"==t;let a=localStorage.getItem("t");this.t=void 0==a?15:parseInt(a);let r=localStorage.getItem("t1");this.t1=void 0==r?8:parseInt(r);let l=localStorage.getItem("startDate");this.startDate=void 0==l?"2021-03-01":l;let i=localStorage.getItem("holidays");void 0!=i&&Object.assign(this.holidays,JSON.parse(i))},watch:{english:function(e){localStorage.setItem("english",e)},t:function(e){localStorage.setItem("t",e)},t1:function(e){localStorage.setItem("t1",e)},startDate:function(e){localStorage.setItem("startDate",e)},holidays:function(e){localStorage.setItem("holidays",JSON.stringify(e))}}});var M=a(4260),L=a(3812),E=a(9570),P=a(3747),V=a(4379),T=a(8508),H=a(4554),Z=a(4786),Q=a(643),F=a(3351),$=a(2582),j=a(9721),U=a(7030),O=a(677),B=a(7518),Y=a.n(B);const N=(0,M.Z)(I,[["render",W]]),A=N;Y()(I,"components",{QHeader:L.Z,QToolbar:E.Z,QToolbarTitle:P.Z,QPage:V.Z,QInput:T.Z,QIcon:H.Z,QPopupProxy:Z.Z,QDate:Q.Z,QBtn:F.Z,QToggle:$.Z,QBadge:j.Z,QChip:U.Z}),Y()(I,"directives",{ClosePopup:O.Z})}}]);